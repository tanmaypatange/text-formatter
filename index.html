<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Sync & Contractions Tool</title>
    <style>
        body {font-family:Arial,sans-serif;max-width:800px;margin:0 auto;padding:20px;background-color:#f0f0f0;}
        .container {display:flex;gap:20px;flex-wrap:wrap;}
        .text-box {flex:1;min-width:300px;}
        textarea {width:100%;height:200px;padding:10px;margin:10px 0;border:2px solid #ccc;border-radius:4px;resize:vertical;}
        .count {color:#666;font-size:0.9em;}
        button {padding:8px 16px;margin:5px;background-color:#4CAF50;color:white;border:none;border-radius:4px;cursor:pointer;}
        button:disabled {background-color:#cccccc;cursor:not-allowed;}
        .status {color:green;margin-left:10px;opacity:0;transition:opacity 0.5s;}
        .visible {opacity:1;}
    </style>
</head>
<body>
    <h1>Text Sync & Contractions Tool</h1>
    <div class="container">
        <div class="text-box">
            <h2>Input (Editable)</h2>
            <textarea id="input" oninput="syncText()"></textarea>
            <div class="count">Words: <span id="inputWordCount">0</span> | Characters: <span id="inputCharCount">0</span></div>
        </div>
        <div class="text-box">
            <h2>Output (Locked)</h2>
            <textarea id="output" readonly></textarea>
            <div class="count">Words: <span id="outputWordCount">0</span> | Characters: <span id="outputCharCount">0</span></div>
        </div>
    </div>

    <div>
        <button id="copyBtn" onclick="copyText()" disabled>Copy Text</button>
        <button id="resetBtn" onclick="resetText()" disabled>Reset</button>
        <button id="removeBtn" onclick="removeContractions()" disabled>Remove Contractions</button>
        <button id="revertBtn" onclick="revertText()" disabled>Revert</button>
        <button id="addContractionBtn" onclick="addContraction()" disabled>Add Contraction</button>
        <span id="status" class="status"></span>
    </div>

    <script>
        let contractions = {
            "ain't":"am not","aren't":"are not","can't":"cannot","could've":"could have",
            "couldn't":"could not","didn't":"did not","doesn't":"does not","don't":"do not",
            "hadn't":"had not","hasn't":"has not","haven't":"have not","he'd":"he would",
            "he'll":"he will","he's":"he is","how'd":"how did","how'll":"how will",
            "how's":"how is","I'd":"I would","I'll":"I will","I'm":"I am","I've":"I have",
            "isn't":"is not","it's":"it is","let's":"let us","might've":"might have",
            "must've":"must have","shan't":"shall not","she'd":"she would","she'll":"she will",
            "she's":"she is","should've":"should have","shouldn't":"should not","that's":"that is",
            "there's":"there is","they'd":"they would","they'll":"they will","they're":"they are",
            "they've":"they have","wasn't":"was not","we'd":"we would","we'll":"we will",
            "we're":"we are","we've":"we have","weren't":"were not","what'll":"what will",
            "what're":"what are","what's":"what is","what've":"what have","where'd":"where did",
            "where's":"where is","who'd":"who would","who'll":"who will","who's":"who is",
            "why'd":"why did","why'll":"why will","why's":"why is","won't":"will not",
            "would've":"would have","wouldn't":"would not","you'd":"you would","you'll":"you will",
            "you're":"you are","you've":"you have"
        };

        function updateCounts(t,w,c){
            let v=t.value;
            w.textContent=v?v.trim().split(/\s+/).filter(w=>w.length>0).length:0;
            c.textContent=v.length;
        }

        function syncText(){
            let i=document.getElementById('input'),o=document.getElementById('output');
            o.value=i.value;
            updateCounts(i,document.getElementById('inputWordCount'),document.getElementById('inputCharCount'));
            updateCounts(o,document.getElementById('outputWordCount'),document.getElementById('outputCharCount'));
            toggleButtons();
        }

        function toggleButtons(){
            let t=document.getElementById('input').value,h=!!t.length,
                c=Object.keys(contractions).some(k=>new RegExp(`\\b${k}\\b`,'i').test(t));
            ['copyBtn','resetBtn','revertBtn','addContractionBtn'].forEach(b=>document.getElementById(b).disabled=!h);
            document.getElementById('removeBtn').disabled=!h||!c;
        }

        function copyText(){
            navigator.clipboard.writeText(document.getElementById('output').value);
            showStatus('Text copied!');
        }

        function resetText(){
            document.getElementById('input').value='';
            syncText();
            showStatus('Text reset!');
        }

        function removeContractions(){
            let o=document.getElementById('output'),t=o.value;
            Object.keys(contractions).forEach(k=>{
                t=t.replace(new RegExp(`\\b${k}\\b`,'gi'),m=>{
                    let e=contractions[k.toLowerCase()];
                    return m===m.toUpperCase()?e.toUpperCase():
                        m[0]===m[0].toUpperCase()?e[0].toUpperCase()+e.slice(1):e;
                });
            });
            o.value=t;
            updateCounts(o,document.getElementById('outputWordCount'),document.getElementById('outputCharCount'));
            showStatus('Contractions removed!');
            toggleButtons();
        }

        function revertText(){
            let i=document.getElementById('input'),o=document.getElementById('output');
            o.value=i.value;
            updateCounts(o,document.getElementById('outputWordCount'),document.getElementById('outputCharCount'));
            showStatus('Text reverted!');
        }

        function addContraction(){
            let c=prompt('Contraction (e.g. "don\'t"):'),e=prompt('Expansion (e.g. "do not"):');
            if(c&&e){contractions[c.toLowerCase()]=e;showStatus('Contraction added!');toggleButtons();}
        }

        function showStatus(m){
            let s=document.getElementById('status');
            s.textContent=m;
            s.classList.add('visible');
            setTimeout(()=>s.classList.remove('visible'),2000);
        }
    </script>
</body>
</html>
